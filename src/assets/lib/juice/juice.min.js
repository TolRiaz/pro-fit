/**
 * Minified by jsDelivr using Terser v5.17.1.
 * Original file: /npm/generator-angular-juice@1.0.0/app/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var fs=require("fs"),path=require("path"),util=require("util"),angularUtils=require("../util.js"),yeoman=require("yeoman-generator"),chalk=require("chalk"),wiredep=require("wiredep"),Generator=module.exports=function(e,t){if(yeoman.generators.Base.apply(this,arguments),this.argument("appname",{type:String,required:!1}),this.appname=this.appname||path.basename(process.cwd()),this.appname=this._.camelize(this._.slugify(this._.humanize(this.appname))),this.option("app-suffix",{desc:"Allow a custom suffix to be added to the module name",type:String,required:"false"}),this.scriptAppName=this.appname+angularUtils.appName(this),e=["main"],void 0===this.env.options.appPath){try{this.env.options.appPath=require(path.join(process.cwd(),"bower.json")).appPath}catch(e){}this.env.options.appPath=this.env.options.appPath||"app"}this.appPath=this.env.options.appPath,void 0===this.env.options.coffee&&(this.option("coffee",{desc:"Generate CoffeeScript instead of JavaScript"}),!this.options.coffee&&this.expandFiles(path.join(this.appPath,"/scripts/**/*.coffee"),{}).length>0&&(this.options.coffee=!0),this.env.options.coffee=this.options.coffee),void 0===this.env.options.minsafe&&(this.option("minsafe",{desc:"Generate AngularJS minification safe code"}),this.env.options.minsafe=this.options.minsafe,e.push("--minsafe")),void 0===this.env.options.jade&&(this.option("jade",{desc:"Generate views using Jade templates"}),!this.options.coffee&&this.expandFiles(path.join(this.appPath,"/views/**/*.jade"),{}).length>0&&(this.options.jade=!0),this.env.options.jade=this.options.jade),this.hookFor("angular-juice:common",{args:e}),this.hookFor("angular-juice:main",{args:e}),this.hookFor("angular-juice:controller",{args:e}),this.on("end",(function(){this.installDependencies({skipInstall:this.options["skip-install"],callback:this._injectDependencies.bind(this)});var e=[];this.resourceModule&&e.push("angular-resource/angular-resource.js"),this.cookiesModule&&e.push("angular-cookies/angular-cookies.js"),this.sanitizeModule&&e.push("angular-sanitize/angular-sanitize.js"),this.routeModule&&e.push("angular-route/angular-route.js"),this.invoke("karma:app",{options:{coffee:this.options.coffee,travis:!0,"skip-install":this.options["skip-install"],components:["angular/angular.js","angular-mocks/angular-mocks.js"].concat(e)}})})),this.pkg=require("../package.json")};function generateJadeBlock(e,t,s,i,o){var a="";return void 0!==i&&(util.isArray(i)&&(i="{"+i.join(",")+"}"),a="("+i+")"),"\n"+o+"\x3c!-- build:"+e+a+" "+t+" --\x3e\n"+s+(o+"\x3c!-- endbuild --\x3e\n"+o)}function appendJade(e,t,s){var i="//- build:"+t,o=e.indexOf(i);return[e.slice(0,o),s,e.slice(o)].join("")}function appendFilesToJade(e,t,s,i,o,a){var n,r=e,p="    ",l="";return"object"==typeof e&&(r=e.html,t=e.fileType,s=e.optimizedPath,i=e.sourceFileList,o=e.attrs,a=e.searchPath),"js"===t?(i.forEach((function(e){l+=p+"<script "+(o||"")+'src="'+e+'"><\/script>\n'})),n=appendJade(r,"body",generateJadeBlock("js",s,l,a,p))):"css"===t&&(i.forEach((function(e){l+=p+"<link "+(o||"")+'rel="stylesheet" href="'+e+'">\n'})),n=appendJade(r,"head",generateJadeBlock("css",s,l,a,p))),n}util.inherits(Generator,yeoman.generators.Base),Generator.prototype.welcome=function(){this.options["skip-welcome-message"]||(console.log(this.yeoman),console.log("Out of the box I include Stylus/Nib and some AngularJS recommended modules.\n"),this.options.minsafe&&console.warn("\n** The --minsafe flag is being deprecated in 0.7.0 and removed in 0.8.0. For more information, see https://github.com/yeoman/generator-angular#minification-safe. **\n"))},Generator.prototype.askForStylus=function(){var e=this.async();this.prompt([{type:"confirm",name:"stylus",message:"Would you like to use Stylus (with Nib)?",default:!0}],function(t){this.stylus=t.stylus,e()}.bind(this))},Generator.prototype.askForModules=function(){var e=this.async();this.prompt([{type:"checkbox",name:"modules",message:"Which modules would you like to include?",choices:[{value:"resourceModule",name:"angular-resource.js",checked:!0},{value:"cookiesModule",name:"angular-cookies.js",checked:!0},{value:"sanitizeModule",name:"angular-sanitize.js",checked:!0},{value:"routeModule",name:"angular-route.js",checked:!0}]}],function(t){var s=function(e){return-1!==t.modules.indexOf(e)};this.resourceModule=s("resourceModule"),this.cookiesModule=s("cookiesModule"),this.sanitizeModule=s("sanitizeModule"),this.routeModule=s("routeModule");var i=[];this.cookiesModule&&i.push("'ngCookies'"),this.resourceModule&&i.push("'ngResource'"),this.sanitizeModule&&i.push("'ngSanitize'"),this.routeModule&&(i.push("'ngRoute'"),this.env.options.ngRoute=!0),i.length&&(this.env.options.angularDeps="\n  "+i.join(",\n  ")+"\n"),e()}.bind(this))},Generator.prototype.askForMongo=function(){var e=this.async();this.prompt([{type:"confirm",name:"mongo",message:"Would you like to include MongoDB with Mongoose?",default:!1}],function(t){this.mongo=t.mongo,e()}.bind(this))},Generator.prototype.readIndex=function(){this.ngRoute=this.env.options.ngRoute,this.jade=this.env.options.jade,this.jade?this.indexFile=this.engine(this.read("../../templates/views/jade/index.jade"),this):this.indexFile=this.engine(this.read("../../templates/views/html/index.html"),this)},Generator.prototype.styles=function(){var e="main."+(this.stylus?"styl":"css");this.copy("styles/"+e,"app/styles/"+e)},Generator.prototype.navBarScript=function(){var e="js",t="javascript",s="";this.env.options.coffee&&(e="coffee",t="coffeescript"),this.env.options.minsafe&&(s="-min"),this.copy("../../templates/"+t+s+"/navbar."+e,"app/scripts/controllers/navbar."+e)},Generator.prototype.appJs=function(){var e={html:this.indexFile,fileType:"js",optimizedPath:"scripts/scripts.js",sourceFileList:["scripts/app.js","scripts/controllers/main.js","scripts/controllers/navbar.js"],searchPath:[".tmp","app"]};this.jade?this.indexFile=appendFilesToJade(e):this.indexFile=this.appendFiles(e)},Generator.prototype.createIndex=function(){this.indexFile=this.indexFile.replace(/&apos;/g,"'"),this.jade?this.write(path.join(this.appPath,"views","index.jade"),this.indexFile):this.write(path.join(this.appPath,"views","index.html"),this.indexFile)},Generator.prototype.addJadeViews=function(){this.jade&&(this.copy("../../templates/views/jade/partials/main.jade","app/views/partials/main.jade"),this.copy("../../templates/views/jade/partials/navbar.jade","app/views/partials/navbar.jade"),this.copy("../../templates/views/jade/404.jade","app/views/404.jade"))},Generator.prototype.addHtmlViews=function(){this.jade||(this.copy("../../templates/views/html/partials/main.html","app/views/partials/main.html"),this.copy("../../templates/views/html/partials/navbar.html","app/views/partials/navbar.html"),this.copy("../../templates/views/html/404.html","app/views/404.html"))},Generator.prototype.packageFiles=function(){this.coffee=this.env.options.coffee,this.template("../../templates/common/_bower.json","bower.json"),this.template("../../templates/common/_package.json","package.json"),this.template("../../templates/common/Gruntfile.js","Gruntfile.js")},Generator.prototype.imageFiles=function(){this.sourceRoot(path.join(__dirname,"templates")),this.directory("images","app/images",!0)},Generator.prototype._injectDependencies=function(){var e="\nAfter running `npm install & bower install`, inject your front end dependencies into\nyour HTML by running:\n"+chalk.yellow.bold("\n  grunt bower-install");this.options["skip-install"]?console.log(e):this.jade?wiredep({directory:"app/bower_components",bowerJson:JSON.parse(fs.readFileSync("./bower.json")),ignorePath:"app/",htmlFile:"app/views/index.jade",cssPattern:'<link rel="stylesheet" href="{{filePath}}">'}):wiredep({directory:"app/bower_components",bowerJson:JSON.parse(fs.readFileSync("./bower.json")),ignorePath:"app/",htmlFile:"app/views/index.html",cssPattern:'<link rel="stylesheet" href="{{filePath}}">'})},Generator.prototype.serverFiles=function(){this.template("../../templates/express/server.js","server.js"),this.template("../../templates/express/api.js","lib/controllers/api.js"),this.template("../../templates/express/index.js","lib/controllers/index.js"),this.template("../../templates/express/config/express.js","lib/config/express.js")},Generator.prototype.mongoFiles=function(){this.mongo&&(this.template("../../templates/express/mongo/mongo.js","lib/db/mongo.js"),this.template("../../templates/express/mongo/dummydata.js","lib/db/dummydata.js"),this.template("../../templates/express/mongo/thing.js","lib/models/thing.js"))};
//# sourceMappingURL=/sm/55de1cc225add1fe560a8a40c14f2c5835544f8061529f149382b6b8ea594500.map